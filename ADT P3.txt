create table student(rollno int,name char(25),tot_marks number(10),trade char(25));

create table IT(rollno int,name char(25),tot_marks number(10),trade char(25),rank number(3));

create table CS(rollno int,name char(25),tot_marks number(10),trade char(25),rank number(3));

declare
rno int;
nam char(25);
tot number(10);
trd char(25);
rnk number(3);
mx number(10);
i number(4);
cursor curr is select * from student;
cursor cit is select * from it;
cursor ccs is select * from cs;
begin
delete from it;
delete from cs;
open curr;
loop
fetch curr into rno, nam, tot, trd;
if curr%found then
if trd = 'IT' then insert into it values (rno, nam, tot, trd, rnk);
elsif trd = 'CS' then insert into cs values (rno, nam, tot, trd, rnk);
end if;
else
exit;
end if;
end loop;
commit;
close curr;
i := 1;
update cs set rank = NULL;
open ccs;
loop
fetch ccs into rno, nam, tot, trd, rnk;
if ccs%found then select max(tot_marks) into mx from cs where rank is NULL;
update cs set rank = i where tot_marks = mx;
i := i + 1;
else
exit;
end if;
end loop;
commit;
close ccs;
i := 1;
update it set rank = null;
open cit;
loop
fetch cit into rno, nam, tot, trd, rnk;
if cit%found then select max(tot_marks) into mx from it where rank is NULL;
update it set rank = i where tot_marks = mx;
i:=i+1;
else
exit;
end if;
end loop;
commit;
close cit;
end;
/